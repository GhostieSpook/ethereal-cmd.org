<div class="navbar">
  <div>
    <a href="/index.html">Home</a>
    <a href="/members.html">Members</a>
    <a href="/events.html">Events</a>
    <a href="/divisions.html">Divisions</a>
    <div class="dropdown">
      <a href="/fleets.html">Fleets</a>
      <div class="dropdown-content">
        <a href="/fleets/first-fleet.html">First Fleet</a>
      </div>
    </div>
    <span style="padding: 0 15px;">Training</span>
    <span style="padding: 0 15px;">Library</span>
    <div class="dropdown">
      <span style="padding: 0 15px;">Information</span>
      <div class="dropdown-content">
        <a href="/bank.html">Bank</a>
      </div>
    </div>
  </div>

  <div class="navbar-right">
    <span id="user-profile" style="padding-right: 15px;">Loading...</span>
    <button id="login-button" style="display: none;" onclick="window.location.href='/login.html'">Login</button>
    <button id="logout-button" style="display: none;">Logout</button>
  </div>
</div>

<script type="module">
  import { logout, getCurrentUser } from "/js/auth.js";

  document.addEventListener("DOMContentLoaded", () => {
    const userProfile = document.getElementById("user-profile");
    const loginButton = document.getElementById("login-button");
    const logoutButton = document.getElementById("logout-button");

    const user = getCurrentUser();

    if (user) {
      userProfile.textContent = `Logged in as: ${user.email}`;
      loginButton.style.display = "none";
      logoutButton.style.display = "block";

      logoutButton.addEventListener("click", () => {
        logout();
      });
    } else {
      userProfile.textContent = "Not logged in.";
      loginButton.style.display = "block";
      logoutButton.style.display = "none";
    }
  });
</script>
