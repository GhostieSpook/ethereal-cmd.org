<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ethereal Command Homepage</title>
  <link rel="stylesheet" href="/styles.css">
  <style>
    .container {
      display: flex;
      justify-content: space-between;
      margin: 20px;
    }

    .sidebar {
      width: 25%; /* Adjusted width for sidebar */
      background-color: #222;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .sidebar h2, .sidebar h3 {
      color: #fff;
      margin-bottom: 10px;
    }

    .members-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .member-box {
            padding: 10px;
            border-radius: 5px;
            background-color: #292929;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

    .events-container .event {
      margin-bottom: 20px;
      background-color: #292929;
      padding: 20px;
      border-radius: 10px;
    }

    .main-content {
      flex: 1;
      margin-left: 20px;
      background-color: #222;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .news-item {
      background-color: #292929;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .news-item h3 {
      margin-bottom: 10px;
      color: #fff;
    }

    .news-item p {
      color: #aaa;
    }

    .member-card {
  display: flex;
  align-items: center; /* Aligns items (image and text) vertically */
}

.member-card img {
  border-radius: 50%;
  margin-right: 10px;
  width: 50px;
  height: 50px;
  align-self: flex-start; /* Ensures the image aligns with the start of the text block */
}

.member-card .member-info {
  display: flex;
  flex-direction: column; /* Stacks the h3 and p elements vertically */
  justify-content: center; /* Centers the text vertically relative to the image */
}

.member-card h3 {
  margin: 0;
  font-size: 16px; /* Adjust font size */
}

.member-card p {
  margin: 0;
  padding: 5px;
  font-size: 14px; /* Slightly smaller than h3 for hierarchy */
  color: #ccc; /* Optional lighter color for the role */
}
.members-container, .events-container {
      margin-top: 10px;
    }

    .member-card {
      background-color: #333;
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 5px;
      color: #fff;
    }
  </style>
</head>
<body>

  <div id="header"></div>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
        fetch("header.html")
            .then((response) => response.text())
            .then((html) => {
                document.getElementById("header").innerHTML = html;
            })
            .catch((error) => {
                console.error("Error loading header:", error);
            });
    });
</script>

  <!-- Main Content -->
  <div class="container">
    <!-- Sidebar for Events and Members -->
    <div class="sidebar">
      <h2>Ethereal CMD At a Glance</h2>

      <!-- Upcoming Events -->
      <h3>Upcoming Events</h3>
      <div class="events-container" id="events"></div>

      <!-- Newest Members -->

        <h2>Newest Members</h2>
        <div id="newest-members" class="members-container">
          <!-- Latest members will be dynamically loaded here -->
      </div>
      
      
    </div>

    <!-- Main Content Area -->
    <div class="main-content">
        <h2>Ethereal CMD News Feed</h2>
        <div class="news-container">
          <!-- News articles will be dynamically loaded here -->
        </div>
      </div>
    </div>

 

  </div>

  <script>
    // Fetch and Display Events from events.html
    fetch('events.html')
      .then(response => response.text())
      .then(html => {
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, 'text/html');
        const events = doc.querySelectorAll('.event');
        const eventsContainer = document.getElementById('events');
        events.forEach(event => eventsContainer.appendChild(event.cloneNode(true)));
      })
      .catch(error => console.error('Error fetching events:', error));

    // Fetch and Display the Latest 5 Members from members.html
    async function fetchMembers() {
      try {
        const apiKey = 'b344c819e7d7b541728be16ec9c00f29';
        const sid = 'ethr';
        const apiUrl = `https://api.starcitizen-api.com/${apiKey}/v1/live/organization_members/${sid}`;

        const response = await fetch(apiUrl);
        const data = await response.json();
        console.log(data); // Log the raw data to the console

        const members = data.data || [];

        const newestMembers = members.slice(0, 5); // Get the newest 5 members

        const membersList = document.getElementById('newest-members');
        membersList.innerHTML = ''; // Clear loading text

        newestMembers.forEach(member => {
          const listItem = document.createElement('div');
          listItem.className = 'member-card';
          listItem.innerHTML = `
            <img src="${member.image || 'default-image.jpg'}" alt="${member.handle || 'Member'}">
            <div class="member-info">
              <h3>${member.handle || 'N/A'}</h3>
              <p>${member.rank || 'N/A'}</p>
            </div>
          `;
          membersList.appendChild(listItem);
        });
      } catch (error) {
        console.error("Error fetching members:", error);
        document.getElementById('newest-members').textContent = "Failed to load members.";
      }
    }
    fetchMembers();


      fetch('news.html')
  .then(response => response.text())
  .then(html => {
    const parser = new DOMParser();
    const doc = parser.parseFromString(html, 'text/html');
    const newsArticles = doc.querySelectorAll('.news-article');
    const newsContainer = document.querySelector('.news-container');
    newsArticles.forEach(article => {
      newsContainer.appendChild(article.cloneNode(true));
    });
  })
  .catch(error => console.error('Error fetching news:', error));

  </script>
  
        
        <!-- Footer -->
  <footer>
    <p>&copy; 2025 Ethereal Command</p>
    <p>
      <a href="https://robertsspaceindustries.com/orgs/ETHR">RSI Page</a>
      <a href="https://discord.gg/XvwJ45FDdv">Discord</a>
    </p>
    <p>
      This site is not endorsed by or affiliated with the Cloud Imperium or Roberts Space Industries group of companies.
      All game content and materials are copyright Cloud Imperium Rights LLC and Cloud Imperium Rights Ltd.
      Star Citizen&reg;, Squadron 42&reg;, Roberts Space Industries&reg;, and Cloud Imperium&reg; are registered trademarks of Cloud Imperium Rights LLC. All rights reserved.
    </p>
  </footer>
</body>
</html>
